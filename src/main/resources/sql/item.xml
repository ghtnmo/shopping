<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="item">
    
    <insert id="insertItem" parameterType="item">
    	<![CDATA[
        insert into t_item (item_code,item_title,item_price,item_discount,item_stock,item_description,item_thumbnail,item_cdate)
        values ( t_item_code_seq.nextval, #{item_title},#{item_price},#{item_discount},#{item_stock},#{item_description},#{item_thumbnail},sysdate)
        ]]>
    </insert>
	
	<select id="listItem" parameterType="hashmap" resultType="item">
		<![CDATA[
		select 
			a.*,
    		GET_REVIEW_COUNT(a.item_code) as review_count
		from 
			v_item a
		where
			rn <=#{endNum}
		and 
			rn>=#{startNum}
		]]>
	</select>
	
	<select id="listItemCount" resultType="Integer">
		<![CDATA[
		select count(*) from t_item
		]]>
	</select>
	<select id="detailItem" parameterType="Integer" resultType="item">
		<![CDATA[
		select 
			a.*,
			GET_REVIEW_COUNT(a.item_code) as review_count
		from
			v_item a
		where
			item_code = #{item_code}
		]]>
	</select>
</mapper>



